{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mt-4">
    <h2>Respuesta de Encuesta</h2>
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">Servicio #{{ servicio.id }}</h5>
            <p class="card-text">
                <strong>Cliente:</strong> {{ servicio.preorden.cliente.razon_social }}<br>
                <strong>Fecha de Servicio:</strong> {{ servicio.fecha_servicio }}<br>
                <strong>Fecha de Respuesta:</strong> {{ respuesta.fecha_respuesta }}
            </p>
            
            <div class="mt-4">
                <h6>Detalles de la Respuesta:</h6>
                <p>
                    <strong>Cumplimiento del Acuerdo:</strong> 
                    <span class="badge {% if respuesta.cumplimiento_acuerdo >= 9 %}bg-success
                                     {% elif respuesta.cumplimiento_acuerdo >= 7 %}bg-warning
                                     {% else %}bg-danger{% endif %}">
                        {{ respuesta.cumplimiento_acuerdo }}/10
                    </span><br>
                    {% if respuesta.motivo_cumplimiento_bajo %}
                        <strong>Motivo (si ≤7):</strong> {{ respuesta.motivo_cumplimiento_bajo }}<br>
                    {% endif %}
                    
                    <strong>Probabilidad de Recomendación (NPS):</strong> 
                    <span class="badge {% if respuesta.probabilidad_recomendacion >= 9 %}bg-success
                                     {% elif respuesta.probabilidad_recomendacion >= 7 %}bg-warning
                                     {% else %}bg-danger{% endif %}">
                        {{ respuesta.probabilidad_recomendacion }}/10
                    </span><br>
                    {% if respuesta.motivo_recomendacion_baja %}
                        <strong>Motivo (si ≤7):</strong> {{ respuesta.motivo_recomendacion_baja }}<br>
                    {% endif %}
                    
                    {% if respuesta.problemas_pendientes %}
                        <strong>Problemas Pendientes:</strong><br>
                        {{ respuesta.problemas_pendientes|linebreaks }}<br>
                    {% endif %}
                    
                    {% if respuesta.comentarios_generales %}
                        <strong>Comentarios Generales:</strong><br>
                        {{ respuesta.comentarios_generales|linebreaks }}<br>
                    {% endif %}
                </p>
                <p>
                    <strong>Respondido por:</strong> {{ respuesta.nombre_respondente|default:"No especificado" }}<br>
                    <strong>Cargo:</strong> {{ respuesta.cargo_respondente|default:"No especificado" }}
                </p>
            </div>
            
            <a href="{% url 'gestionDeTaller:lista_encuestas' %}" class="btn btn-secondary">Volver</a>
        </div>
    </div>
</div>
{% endblock %} 