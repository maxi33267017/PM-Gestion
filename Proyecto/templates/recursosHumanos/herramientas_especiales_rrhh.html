{% extends 'base.html' %}
{% load static %}

{% block title %}Herramientas Especiales - RRHH{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- Header -->
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
        <h1 class="h3 mb-0 text-gray-800">
            <i class="bi bi-tools me-2"></i>
            Herramientas Especiales
        </h1>
        <a href="{% url 'recursosHumanos:dashboard_rrhh' %}" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left me-2"></i>
            Volver al Dashboard
        </a>
    </div>

    <!-- Filtros -->
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">Filtros</h6>
        </div>
        <div class="card-body">
            <form method="get" class="row">
                <div class="col-md-4">
                    <label for="ubicacion" class="form-label">Ubicación</label>
                    <select name="ubicacion" id="ubicacion" class="form-select">
                        <option value="">Todas las ubicaciones</option>
                        <option value="EST_JD01" {% if ubicacion_filtro == 'EST_JD01' %}selected{% endif %}>Estante JD01</option>
                        <option value="EST_JD02" {% if ubicacion_filtro == 'EST_JD02' %}selected{% endif %}>Estante JD02</option>
                        <option value="EST_JD03" {% if ubicacion_filtro == 'EST_JD03' %}selected{% endif %}>Estante JD03</option>
                        <option value="EST_JD04" {% if ubicacion_filtro == 'EST_JD04' %}selected{% endif %}>Estante JD04</option>
                        <option value="EST_JD05" {% if ubicacion_filtro == 'EST_JD05' %}selected{% endif %}>Estante JD05</option>
                        <option value="EST_JD06" {% if ubicacion_filtro == 'EST_JD06' %}selected{% endif %}>Estante JD06</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label for="disponible" class="form-label">Estado</label>
                    <select name="disponible" id="disponible" class="form-select">
                        <option value="">Todos los estados</option>
                        <option value="disponible" {% if disponible_filtro == 'disponible' %}selected{% endif %}>Disponible</option>
                        <option value="no_disponible" {% if disponible_filtro == 'no_disponible' %}selected{% endif %}>No Disponible</option>
                    </select>
                </div>
                <div class="col-md-4 d-flex align-items-end">
                    <button type="submit" class="btn btn-primary me-2">
                        <i class="bi bi-search me-2"></i>Filtrar
                    </button>
                    <a href="{% url 'recursosHumanos:herramientas_especiales_rrhh' %}" class="btn btn-outline-secondary">
                        <i class="bi bi-x-circle me-2"></i>Limpiar
                    </a>
                </div>
            </form>
        </div>
    </div>

    <!-- Lista de Herramientas -->
    <div class="card shadow">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">
                Lista de Herramientas Especiales ({{ herramientas.count }})
            </h6>
        </div>
        <div class="card-body">
            {% if herramientas %}
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Código</th>
                                <th>Nombre</th>
                                <th>Ubicación</th>
                                <th>Estado</th>
                                <th>Observaciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for herramienta in herramientas %}
                            <tr>
                                <td><strong>{{ herramienta.codigo }}</strong></td>
                                <td>{{ herramienta.nombre }}</td>
                                <td>{{ herramienta.get_ubicacion_display }}</td>
                                <td>
                                    {% if herramienta.disponible %}
                                        <span class="badge bg-success">Disponible</span>
                                    {% else %}
                                        <span class="badge bg-danger">No Disponible</span>
                                    {% endif %}
                                </td>
                                <td>{{ herramienta.observaciones|truncatewords:10 }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <div class="text-center py-4">
                    <i class="bi bi-tools text-muted" style="font-size: 3rem;"></i>
                    <p class="text-muted mt-2">No se encontraron herramientas con los filtros aplicados</p>
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %} 