{% load static %}
<header>
    <nav class="navbar navbar-expand-lg bg-body-tertiary shadow-sm">
        <div class="container-fluid px-3">
            <!-- Logo -->
            <a href="{% url 'gestionDeTaller:gestion_de_taller' %}" class="navbar-brand me-4">
                <img class="logo_sidebar" src="{% static 'img/logo_pm.png' %}" height="60px" width="180px" alt="Patagonia Maquinarias">
            </a>
            
            <!-- Botón hamburguesa -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <!-- Menú principal -->
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == '/dashboard/clientes/' %}active{% endif %}" href="{% url 'clientes' %}">
                            <i class="bi bi-people me-1"></i>Clientes
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == '/dashboard/parque/' %}active{% endif %}" href="{% url 'parque' %}">
                            <i class="bi bi-truck me-1"></i>Parque
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == '/dashboard/gestion_de_taller/' %}active{% endif %}" href="{% url 'gestionDeTaller:gestion_de_taller' %}">
                            <i class="bi bi-tools me-1"></i>Taller
                        </a>
                    </li>
                    {% if user.rol == 'TECNICO' %}
                    <li class="nav-item">
                        <a class="nav-link {% if 'dashboard-tecnico' in request.path %}active{% endif %}" href="{% url 'gestionDeTaller:dashboard_tecnico' %}">
                            <i class="bi bi-speedometer2 me-1"></i>Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if 'recursosHumanos/cronometro' in request.path %}active{% endif %}" href="{% url 'recursosHumanos:cronometro' %}">
                            <i class="bi bi-stopwatch me-1"></i>Cronómetro
                        </a>
                    </li>
                    {% endif %}
                    
                    {% if user.rol == 'GERENTE' or user.is_superuser %}
                    <li class="nav-item">
                        <a class="nav-link {% if 'dashboard-gerente' in request.path %}active{% endif %}" href="{% url 'gestionDeTaller:dashboard_gerente' %}">
                            <i class="bi bi-speedometer2 me-1"></i>Dashboard Gerente
                        </a>
                    </li>
                    {% endif %}
                    
                    {% if user.rol == 'ADMINISTRATIVO' or user.rol == 'GERENTE' or user.is_superuser %}
                    <li class="nav-item">
                        <a class="nav-link {% if 'dashboard-administrador' in request.path %}active{% endif %}" href="{% url 'gestionDeTaller:dashboard_administrador' %}">
                            <i class="fas fa-cogs me-1"></i>Dashboard Administrador
                        </a>
                    </li>
                    {% endif %}
                    <li class="nav-item">
                        <a class="nav-link {% if 'centro-soluciones' in request.path %}active{% endif %}" href="{% url 'centroSoluciones:centro_soluciones_dashboard' %}">
                            <i class="bi bi-broadcast me-1"></i>CSC
                        </a>
                    </li>
                    
                    {% if user.rol == 'GERENTE' or user.rol == 'ADMINISTRATIVO' %}
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == '/crm/' %}active{% endif %}" href="{% url 'crm:crm' %}">
                            <i class="fas fa-users"></i>
                            <span>CRM</span>
                        </a>
                    </li>
                    {% endif %}
                    
                    {% if user.rol == 'GERENTE' %}
                    <li class="nav-item">
                        <a class="nav-link {% if 'venta-maquinarias' in request.path %}active{% endif %}" href="{% url 'ventaMaquinarias:dashboard' %}">
                            <i class="fas fa-truck me-1"></i>Venta Maquinarias
                        </a>
                    </li>
                    {% endif %}
                    
                    {% if user.rol == 'GERENTE' or user.rol == 'ADMINISTRATIVO' %}
                    <li class="nav-item">
                        <a class="nav-link {% if 'reportes' in request.path %}active{% endif %}" href="{% url 'reportes:dashboard_reportes' %}">
                            <i class="bi bi-graph-up me-1"></i>Reportes
                        </a>
                    </li>
                    {% endif %}
                    
                    {% if user.rol == 'GERENTE' or user.rol == 'ADMINISTRATIVO' or user.rol == 'TECNICO' %}
                    <li class="nav-item">
                        <a class="nav-link {% if 'panel-admin' in request.path %}active{% endif %}" href="{% url 'crm:panel_admin' %}">
                            <i class="fas fa-cog"></i>
                            <span>Admin</span>
                        </a>
                    </li>
                    {% endif %}
                </ul>
                
                <!-- Usuario y logout -->
                {% if user.is_authenticated %}
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <span class="nav-link text-muted">
                            <i class="bi bi-person-circle me-1"></i>{{ user.get_nombre_completo }}
                        </span>
                    </li>
                    <li class="nav-item ms-2">
                        <a href="{% url 'logout' %}" class="btn btn-outline-dark btn-sm">
                            <i class="bi bi-box-arrow-right me-1"></i>Salir
                        </a>
                    </li>
                </ul>
                {% endif %}
            </div>
        </div>
    </nav>
</header>
